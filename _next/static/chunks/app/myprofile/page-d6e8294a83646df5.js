(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[546],{9224:(e,s,t)=>{Promise.resolve().then(t.bind(t,305))},305:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(5155),l=t(5115),r=t(6247),i=t(8173),n=t.n(i),c=t(2115);let d=function(){let[e,s]=(0,c.useState)([]),[t,i]=(0,c.useState)(!0),[d,x]=(0,c.useState)(null),[m,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{g(localStorage.getItem("userEmail")||"client@example.com",localStorage.getItem("userPhone")||"+7 (999) 999-99-99")},[]);let g=async(e,t)=>{try{i(!0);let a=await fetch("/api/user-orders?email=".concat(encodeURIComponent(e),"&phone=").concat(encodeURIComponent(t)));if(a.ok){let e=await a.json();s(e)}}catch(e){console.error("Error fetching user orders:",e)}finally{i(!1)}},h=e=>{switch(e){case"pending":return"Ожидает оплаты";case"paid":return"Оплачен";case"in_progress":return"В работе";case"completed":return"Завершен";case"cancelled":return"Отменен";default:return e}},b=e=>{switch(e){case"pending":return"text-yellow-600";case"paid":case"completed":return"text-green-600";case"in_progress":return"text-blue-600";case"cancelled":return"text-red-600";default:return"text-gray-600"}},u=e=>{x(e),o(!0)},p=()=>{x(null),o(!1)};return(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-30 pt-4",children:(0,a.jsx)("div",{className:"device-container flex px-4",children:(0,a.jsx)(n(),{href:"/",className:"rounded-full bg-white font-bold text-center text-md text-neutral-950 px-3.5 py-2 block",children:"Назад"})})}),(0,a.jsxs)("div",{className:"relative z-0 mb-10",children:[(0,a.jsx)("span",{className:"w-[445px] h-[228px] left-1/2 -translate-x-1/2 bg-[#837FDF] block absolute top-[-100px] -z-20 rounded-full blur-[150px]"}),(0,a.jsx)("img",{src:"/images/Frame 166.svg",className:"absolute -z-10 -top-8 w-full",alt:""}),(0,a.jsxs)("div",{className:"mt-8 mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center mb-5",children:(0,a.jsx)("div",{className:"rounded-[100px] bg-[rgb(111,_53,_255)] shadow-[0px_4px_12px_2px_rgba(255,_255,_255,_0.25)_inset] size-[92px] grid place-content-center",children:(0,a.jsx)("img",{src:"/images/user-profile.svg",alt:""})})}),(0,a.jsx)("p",{className:"font-semibold text-center text-4xl text-neutral-950 mb-2.5",children:"Мой профиль"}),(0,a.jsx)("b",{className:"font-semibold block text-center text-4xl text-neutral-950",children:"+7 (999) 999 99 99"})]}),t?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.length>0?(0,a.jsx)("div",{className:"flex flex-col gap-3",children:e.sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()).map(e=>(0,a.jsxs)("div",{className:"rounded-2xl bg-white shadow-4xl p-4 pt-3 flex justify-between gap-2 items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("b",{className:"font-semibold text-2xl text-neutral-950 block mb-1",children:e.serviceName}),(0,a.jsx)("p",{className:"font-semibold text-md ".concat(b(e.status)),children:h(e.status)}),(0,a.jsxs)("p",{className:"font-medium text-sm text-neutral-600 mt-1",children:[e.totalPrice.toLocaleString()," ₽"]}),"paid"===e.status&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"Оплачено"})]})]}),(0,a.jsx)("button",{onClick:()=>u(e),className:"rounded-[100px] bg-primary-dark shadow-5xl size-10 grid place-content-center",children:(0,a.jsx)("img",{src:"/images/Linear  Arrows Alt Arrow Right.svg",alt:""})})]},e.id))}):(0,a.jsxs)("div",{className:"flex flex-col items-center mx-auto max-w-[180px] mt-16",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:"/images/Bold Faces, Emotions, Stickers Sleeping Circle.svg",alt:""})}),(0,a.jsx)("p",{className:"font-semibold text-center text-lg text-neutral-950 mb-8",children:"Вы пока не сделали ни одного заказа"}),(0,a.jsx)(n(),{href:"/",children:(0,a.jsx)(l.A,{children:"Заказать!"})})]})]}),(0,a.jsx)("div",{className:"fixed bottom-0 pb-4 left-0 right-0 bg-[#F9F9F9] py-2",children:(0,a.jsxs)("div",{className:"flex justify-between device-container px-4",children:[(0,a.jsxs)("div",{role:"button",className:"flex items-center gap-1.5",children:[(0,a.jsx)("img",{src:"/images/Linear  Arrows ALogout 2.svg",alt:""}),(0,a.jsx)("span",{className:"font-semibold text-lg text-neutral-950",children:"Выйти"})]}),(0,a.jsxs)("div",{role:"button",className:"flex items-center gap-1.5",children:[(0,a.jsx)("img",{src:"/images/Linear  Essentional, UI Trash Bin Trash.svg",alt:""}),(0,a.jsx)("span",{className:"font-semibold text-lg text-[rgb(221,_72,_58)]",children:"Удалить аккаунт"})]})]})}),m&&d&&(0,a.jsx)(r.A,{open:m,onClose:p,children:(0,a.jsxs)("div",{className:"p-4 md:p-6 w-full max-w-lg mx-auto max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-3 md:mb-4",children:["Детали заказа #",d.id]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3 md:gap-6 mb-4 md:mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2 md:mb-3",children:"Информация о заказе"}),(0,a.jsxs)("div",{className:"space-y-1 md:space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Услуга:"}),(0,a.jsx)("p",{className:"text-base md:text-lg font-semibold text-gray-900 break-words",children:d.serviceName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Сумма:"}),(0,a.jsxs)("p",{className:"text-base md:text-lg font-semibold text-gray-900",children:[d.totalPrice.toLocaleString()," ₽"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Статус:"}),(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("pending"===d.status?"bg-yellow-100 text-yellow-800":"paid"===d.status?"bg-blue-100 text-blue-800":"in_progress"===d.status?"bg-orange-100 text-orange-800":"completed"===d.status?"bg-green-100 text-green-800":"cancelled"===d.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:h(d.status)})]})]})]})}),(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,a.jsx)("h4",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2 md:mb-3",children:"Состав заказа"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Основная услуга:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:d.serviceName})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Базовые функции:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"30 000 ₽"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Дополнительные функции:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"22 000 ₽"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Дизайн:"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"50 000 ₽"})]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"Итого:"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[d.totalPrice.toLocaleString()," ₽"]})]})]})})]}),d.message&&(0,a.jsxs)("div",{className:"mb-4 md:mb-6",children:[(0,a.jsx)("h4",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2 md:mb-3",children:"Сообщение"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-700",children:d.message})})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 md:mb-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2 md:mb-3",children:"Даты"}),(0,a.jsxs)("div",{className:"space-y-1 md:space-y-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Создан:"}),(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:[new Date(d.createdAt).toLocaleDateString("ru-RU")," в ",new Date(d.createdAt).toLocaleTimeString("ru-RU")]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Обновлен:"}),(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:[new Date(d.updatedAt).toLocaleDateString("ru-RU")," в ",new Date(d.updatedAt).toLocaleTimeString("ru-RU")]})]})]})]})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{onClick:p,className:"text-gray-700 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded text-sm w-full sm:w-auto",children:"Закрыть"})})]})})]})}},5115:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(5155);t(2115);let l=(0,t(7782).tv)({base:"rounded-xl font-semibold transition-all duration-200 disabled:bg-[rgb(233,_233,_233)] disabled:shadow-lg text-center disabled:text-neutral-400 disabled:cursor-not-allowed box-border",variants:{variant:{contained:"shadow-lg",outlined:"border"},color:{primary:"",secondary:""},size:{small:"font-extrabold text-md pt-2 px-3.5 pb-2.5",medium:"font-semibold text-lg pt-3.5 px-16 pb-4 font-semibold px-10",large:""}},compoundVariants:[{variant:"contained",color:"primary",className:"bg-primary-dark text-white hover:bg-primary-dark/90"},{variant:"contained",color:"secondary",className:"bg-[rgb(111,_53,_255)] text-white hover:bg-[rgb(111,_53,_255)]/90"},{variant:"outlined",color:"primary",className:"border-primary-dark text-primary-dark hover:bg-primary-dark/10"},{variant:"outlined",color:"secondary",className:"border-[rgb(111,_53,_255)] text-[rgb(111,_53,_255)] hover:bg-[rgb(111,_53,_255)]/10"}]}),r=function(e){let{variant:s="contained",color:t="primary",size:r="medium",children:i,onClick:n,className:c,...d}=e;return(0,a.jsx)("button",{...d,className:"".concat(l({variant:s,color:t,size:r})," ").concat(c||""),onClick:n,children:i})}},6247:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(5155);t(2115);var l=t(5683),r=t(3478);let i=function(e){let{children:s,onClose:t,open:i}=e;return(0,a.jsx)(l.N,{mode:"wait",children:i&&(0,a.jsx)("div",{"aria-label":"dialog",children:(0,a.jsxs)("div",{className:"fixed inset-0 z-40 flex items-center",children:[(0,a.jsx)(r.P.div,{onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-30 bg-black/60 backdrop-blur-[2px] select-none"}),(0,a.jsx)(r.P.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"device-container relative z-50",children:(0,a.jsx)("div",{className:"rounded-xl bg-white shadow-4xl p-3.5",children:s})})]})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[782,173,328,441,517,358],()=>s(9224)),_N_E=e.O()}]);